<odoo>
  <data>

     <record id="filtro_search_libros" model="ir.ui.view">
         <field name="name">Filtro de busqueda para Revision</field>
         <field name="model">libros.blancos</field>
          <field name="arch" type="xml">
             <search string="Busqueda en Partidas">

             <filter name="estado_obra_m2o" string="Estado de contrato" context="{'group_by':'estado_obra_m2o'}"/>

            <separator/>
            <filter string=" --- Ejercicio ---" name="ejercicio"/>
            <separator orientation="vertical" />
            <filter string="2021" name="ejercicio" domain="[('ejercicio.name', '=', '2021')]" />
            <filter string="2020" name="ejercicio" domain="[('ejercicio.name', '=', '2020')]" /> 
            <filter string="2019" name="ejercicio" domain="[('ejercicio.name', '=', '2019')]"/>
            <filter string="2018" name="ejercicio" domain="[('ejercicio.name', '=', '2018')]"/>
            <filter string="2017" name="ejercicio" domain="[('ejercicio.name', '=', '2017')]"/>
            <filter string="2016" name="ejercicio" domain="[('ejercicio.name', '=', '2016')]"/>
            <filter string="2015" name="ejercicio" domain="[('ejercicio.name', '=', '2015')]"/>
            <separator/>
            <separator string="Tipo de la Obra"/>
              <filter string=" --- Tipo de Obra ---" name="tipo_obra"/>
            <separator orientation="vertical" />
             <filter string="OBRA" name="tipo_obra" domain="[('tipo_obra.tipo_obra', '=', 'OBRA')]" />
             <filter string="ESTUDIOS" name="tipo_obra" domain="[('tipo_obra.tipo_obra', '=', 'ESTUDIOS')]" />
             <filter string="EQUIPO" name="tipo_obra" domain="[('tipo_obra.tipo_obra', '=', 'EQUIPO')]" />
             <filter string="PROYECTO" name="tipo_obra" domain="[('tipo_obra.tipo_obra', '=', 'PROYECTO')]" />
             <filter string="SUPERVISIÓN EXTERNA" name="tipo_obra" domain="[('tipo_obra.tipo_obra', '=', 'SUPERVISIÓN EXTERNA')]" />
             <filter string="REMODELACIÓN" name="tipo_obra" domain="[('tipo_obra.tipo_obra', '=', 'REMODELACIÓN')]" />
             <filter string="SERVICIOS" name="tipo_obra" domain="[('tipo_obra.tipo_obra', '=', 'SERVICIOS')]" />
             <filter string="VERIFICACIÓN ELÉCTRICA" name="tipo_obra" domain="[('tipo_obra.tipo_obra', '=', 'VERIFICACIÓN ELÉCTRICA')]" />
             <filter string="CONTROL DE CALIDAD" name="tipo_obra" domain="[('tipo_obra.tipo_obra', '=', 'CONTROL DE CALIDAD')]" />
             <filter string="DIRECTOR RESPONSABLE DE OBRA" name="tipo_obra" domain="[('tipo_obra.tipo_obra', '=', 'DIRECTOR RESPONSABLE DE OBRA')]" />
             <filter string="ADQUISICIÓN" name="tipo_obra" domain="[('tipo_obra.tipo_obra', '=', 'ADQUISICIÓN')]" />

              <field name="contrato" string="Nombre de la Partida"/>
              <field name="nombre_obra"/>
              <field name="contratista"/>
              <field name="tabla_libros_blancos"/>
              <field name="reviso_expediente" /> 

              <field name="verificado_expediente"/>
              <field name="fecha_revisado_exp"/>
              <field name="fecha_verificado_exp"/>
              <field name="responsable_revision_exp"/>
              <field name="registrado" />
              <field name="p_id" string="Partida" />
              <field name="estado_obra_m2o"/>
             </search>
         </field>
      </record>



      


    <report
        id="estatus_expediente_docs"
        model="libros.blancos"
        string="ESTATUS EXPEDIENTE"
        report_type="qweb-html"
        name="libros_blancos.reportex"
        menu="False"
    />

    <report
        id="reporte_incidencia"
        model="libros.blancos"
        string="REPORTE INCIDENCIAS"
        report_type="qweb-html"
        name="libros_blancos.reporte_incidencias_qweb"
        menu="False"
    />

     <report
        id="reporte_ficha"
        model="libros.blancos"
        string="FICHA TECNICA"
        paperformat="libros_blancos.paperformat_libros_ficha"
        report_type="qweb-html"
        name="libros_blancos.reporte_ficha_libros"
        print_report_name="'Reporte_ficha_tecnica /' + object.contrato.contrato"
        menu="False"
    />

    <record model="ir.ui.view" id="libros_documentos_tree">
      <field name="name">tree libros</field>
      <field name="model">expediente.libros_blancos</field>
      <field name="arch" type="xml">
        <tree create="false">
            <field name="numero_documento" readonly="1"/>
           
            <field name="nombre_documento_m2o" string="Nombre Documento"/>
             <field name="etapa" readonly="1"/>
            <field name="aplica"/>
            <field name="existe"/>
            <field name="Observaciones"/>
            <field name="estado_obra_m2o"/> 
            <field name="contrato_id" string="Contrato" invisible="1"/>
            <field name="libros_blancos_id" invisible="1"/> 
             <field name="verificado_expediente" invisible="1"/>
        </tree>
      </field>
    </record>
    
    <record model="ir.ui.view" id="libros_documentos_menu_tree">
      <field name="name">tree libros</field>
      <field name="model">expediente.libros_blancos</field>
      <field name="arch" type="xml">
        <tree create="false">
        <field name="contrato_id" string="Contrato" />
            
           <field name="tipo_obra"/>
            <field name="ejercicio" invisible="1"/>
           <field name="obra"/>
           <field name="contratista"/>
           <field name="residente_obra_2"/>
           <field name="total_siva" string="Monto s/iva"/>
           <field name="numero_documento" readonly="1"/>
            <field name="nombre_documento_m2o" string="Nombre Documento"/>
             <field name="etapa" readonly="1"/>
            <field name="aplica" invisible="1"/>
            <field name="existe" invisible="1"/>
            <field name="libros_blancos_id" invisible="1"/> 
             <field name="sevi" />
             <field name="nombre_sevi" />
             <field name="unidadadminsol" />  
             <field name="estado_obra_m2o"/> 
              <field name="reviso_expediente" invisible="1"/>
              <field name="verificado_expediente" invisible="1"/>
               <field name="fecha_revisado_exp" invisible="1"/>
                <field name="fecha_verificado_exp" invisible="1"/>
        </tree>
      </field>
    </record>


    <record model="ir.ui.view" id="libros_documentos_search">
      <field name="name">tree libros search</field>
      <field name="model">expediente.libros_blancos</field>
      <field name="arch" type="xml">
        <search>

         <separator/>
                    <filter string=" --- Ejercicio ---" name="ejercicio"/>
                  <separator orientation="vertical" />
                  <filter string="2021" name="ejercicio" domain="[('ejercicio.name', '=', '2021')]" />
                    <filter string="2020" name="ejercicio" domain="[('ejercicio.name', '=', '2020')]" />
                    <filter string="2019" name="ejercicio" domain="[('ejercicio.name', '=', '2019')]"/>
                    <filter string="2018" name="ejercicio" domain="[('ejercicio.name', '=', '2018')]"/>
                    <filter string="2017" name="ejercicio" domain="[('ejercicio.name', '=', '2017')]"/>
                    <filter string="2016" name="ejercicio" domain="[('ejercicio.name', '=', '2016')]"/>
                    <filter string="2015" name="ejercicio" domain="[('ejercicio.name', '=', '2015')]"/>

            <separator/>
                    <filter string=" --- Aplica/Existe ---" name="aplica"/>
                  <separator orientation="vertical" />
                    <filter string="Si Aplica" name="aplica" domain="[('aplica', '=', 'Si')]" />
                    <filter string="No Aplica" name="aplica" domain="[('aplica', '=', 'No')]" /> 
                    <filter string="Aplica Por definir" name="aplica" domain="[('aplica', '=', 'Por definir')]" /> 
                    <filter string="Si Existe" name="existe" domain="[('existe', '=', 'Si')]" />
                    <filter string="No Existe" name="existe" domain="[('existe', '=', 'No')]" /> 
                    <filter string="Existe Por definir" name="existe" domain="[('existe', '=', 'Por definir')]" /> 
                    <filter string="Existe N/A" name="existe" domain="[('existe', '=', 'N/A')]" /> 
            <separator/>
                    <filter string=" --- Verificado/Revisado ---" name="verificado_expediente"/>
                  <separator orientation="vertical" />
                    <filter string="Verificado" name="verificado_expediente" domain="[('verificado_expediente', '=', True)]" />
                    <filter string="Revisado" name="reviso_expediente" domain="[('reviso_expediente', '=', True)]" />
            <separator/>
                 <filter string=" --- Tipo de Obra ---" name="tipo_obra"/>
                <separator orientation="vertical" />
                  <filter string="OBRA" name="tipo_obra" domain="[('tipo_obra.tipo_obra', '=', 'OBRA')]" />
                  <filter string="ESTUDIOS" name="tipo_obra" domain="[('tipo_obra.tipo_obra', '=', 'ESTUDIOS')]" />
                  <filter string="EQUIPO" name="tipo_obra" domain="[('tipo_obra.tipo_obra', '=', 'EQUIPO')]" />
                  <filter string="PROYECTO" name="tipo_obra" domain="[('tipo_obra.tipo_obra', '=', 'PROYECTO')]" />
                  <filter string="SUPERVISIÓN EXTERNA" name="tipo_obra" domain="[('tipo_obra.tipo_obra', '=', 'SUPERVISIÓN EXTERNA')]" />
                  <filter string="REMODELACIÓN" name="tipo_obra" domain="[('tipo_obra.tipo_obra', '=', 'REMODELACIÓN')]" />
                  <filter string="SERVICIOS" name="tipo_obra" domain="[('tipo_obra.tipo_obra', '=', 'SERVICIOS')]" />
                  <filter string="VERIFICACIÓN ELÉCTRICA" name="tipo_obra" domain="[('tipo_obra.tipo_obra', '=', 'VERIFICACIÓN ELÉCTRICA')]" />
                  <filter string="CONTROL DE CALIDAD" name="tipo_obra" domain="[('tipo_obra.tipo_obra', '=', 'CONTROL DE CALIDAD')]" />
                  <filter string="DIRECTOR RESPONSABLE DE OBRA" name="tipo_obra" domain="[('tipo_obra.tipo_obra', '=', 'DIRECTOR RESPONSABLE DE OBRA')]" />
                  <filter string="ADQUISICIÓN" name="tipo_obra" domain="[('tipo_obra.tipo_obra', '=', 'ADQUISICIÓN')]" />

            
            <filter name="residente_obra_2" string="Residente" context="{'group_by':'residente_obra_2'}"/>
            <filter name="ejercicio" string="Ejercicio" context="{'group_by':'ejercicio'}"/>
            <filter name="tipo_obra" string="Tipo de Obra" context="{'group_by':'tipo_obra'}"/>
            <filter name="etapa" string="etapa" context="{'group_by':'etapa'}"/>
            <filter name="unidadadminsol" string="Unidad Solicitante" context="{'group_by':'unidadadminsol'}"/>
            <filter name="estado_obra_m2o" string="Estado Contrato" context="{'group_by':'estado_obra_m2o'}"/>

            <field name="contrato_id" string="Contrato"/>
             <field name="nombre_documento_m2o" string="Documento"/>
             <field name="contratista" string="Contratista"/>
            <field name="numero_documento"/>
            <field name="tipo_obra"/>
            <field name="etapa"/> 
            <field name="aplica"/>
            <field name="existe"/>
            <field name="Observaciones"/>
            <field name="verificado_expediente"/>
            <field name="reviso_expediente"/>
            <field name="libros_blancos_id"/>  
            <field name="estado_obra_m2o"/> 
        </search>
      </field>
    </record>

    <!-- VISTA FORM DE LOS DOCUMENOS -->
    <record id="libros_documentos_form" model="ir.ui.view">
          <field name="name">Ventana Libros Blancos</field>
          <field name="model">expediente.libros_blancos</field>
          <field name="arch" type="xml">
              <form string="">
                   <div class="panel panel-default">
                      <div class="panel-body">
                        <h3 colspan="2" align="center"> Contrato:  <field name="contrato_id" readonly="1"/> </h3>
                      </div>
                  </div>
                  <sheet>
                      <group col="4">
                            <field name="numero_documento" />
                            <field name="nombre_documento_m2o" string="Nombre documento"/>
                            <field name="nombre_documento" readonly="1" invisible="1"/>
                            <field name="aplica" readonly="1"/>
                            <field name="existe"/>
                            <field name="Observaciones"/>

                             <field name="verificado_expediente" />

                             <field name="estado_obra_m2o" readonly="1"/> 

                      </group>
                   
                  </sheet>

              </form>
          </field>
      </record>


      <!-- ACCIONES VENTANA ESTIMACIONES -->
    <record model="ir.actions.act_window" id="libros_documentos_action">
      <field name="name">LIBROS BLANCOS</field>
      <field name="type">ir.actions.act_window</field>
      <field name="res_model">expediente.libros_blancos</field>
      <field name="view_mode">tree,form</field>
      <field name="context">{'search_default_libros_blancos_id': active_id}</field>
      <field name="search_view_id" ref="libros_documentos_search"/>
      <field name="limit">100</field>
      <field name="view_ids" eval="[(5, 0, 0),
        (0, 0, {'view_mode': 'tree', 'view_id': ref('libros_documentos_tree')}),
        (0, 0, {'view_mode': 'form', 'view_id': ref('libros_documentos_form')})]"/>
    </record>


     <!-- ACCIONES VENTANA ESTIMACIONES -->
    <record model="ir.actions.act_window" id="libros_documentos_menu_action">
      <field name="name">Documentos Revisados</field>
      <field name="type">ir.actions.act_window</field>
      <field name="res_model">expediente.libros_blancos</field>
      <field name="view_mode">tree,form</field>
      <field name="search_view_id" ref="libros_documentos_search"/>
      <field name="limit">100</field>
      <field name="view_ids" eval="[(5, 0, 0),
        (0, 0, {'view_mode': 'tree', 'view_id': ref('libros_documentos_menu_tree')})]"/>
    </record>

        <!-- VISTA REVISION DOCUMENTOS -->
    <record id="revision_expediente_libros_form" model="ir.ui.view">
        <field name="name">Revision Expediente Único Form</field>
        <field name="model">libros.blancos</field>
        <field name="arch" type="xml">
            <form string="">
                <header>
                   <button name="%(estatus_expediente_docs)d" string="ESTATUS DE EXPEDIENTE" type="action"  icon="fa-copy" />
                   <button name="%(reporte_incidencia)d" string="REPORTE INCIDENCIAS" type="action"  icon="fa-copy" />
                   <button name="%(reporte_ficha)d" string="FICHA TECNICA" type="action"  icon="fa-copy" 
                   attrs="{'invisible': [('responsable_ficha','!=', 687),('responsable_ficha','!=', 2)]}" />
                          <!-- attrs="{'invisible': [('user_id','!=', 687),('user_id','!=', 2)]}"  -->
                </header>
                <sheet>

                      <notebook>
                      <page string="Revision">
                      <group>
                        <field name="contrato" string="# Contrato"/>
                    </group>
                    <group>
                        <field name="reviso_expediente"/>
                        <field name="fecha_revisado_exp" attrs="{'invisible': [('reviso_expediente','=', False)],
                            'required': [('reviso_expediente','=', True)]}" class="oe_inline"/>
                    </group>
                    <hr/>
                    <group attrs="{'invisible': [('reviso_expediente','=', False)]}">
                        
                        <field name="verificado_expediente"/>
                        <field name="fecha_verificado_exp" attrs="{'invisible': [('verificado_expediente','=', False)],
                            'required': [('verificado_expediente','=', True)]}" class="oe_inline"/>
                            <field name="registrado" attrs="{'invisible': [('verificado_expediente','=', False)],
                            'required': [('verificado_expediente','=', True)]}" class="oe_inline"/>
                    </group>

                    <hr/>

                    <group>
                        <field name="responsable_revision_exp" required="1" class="oe_inline"/>
                        <field name="responsable_ficha" />
                    </group>

                    <group>
                        <field name="comentarios_expediente" placeholder="AGREGAR COMENTARIO..."/>
                    </group>

                    <hr/>

                    <group>
                        <field name="digitalizado" />
                        <field name="fecha_digitalizado" /> 
                        <field name="responsable_digitalizado" /> 
                    </group>

                    <group>
                        <field name="numero_tomos" />
                    </group>

                    <hr/>

                    <group>
                        <field name="porcentaje_existencia" readonly="1" force_save="1"/> 
                        <field name="num_faltantes" readonly="1" force_save="1"/>
                    </group>

                    <group>
                    <button name="%(libros_documentos_action)d" type="action" string="Ver lista de documentos" class="btn btn-info"
                    style="float:right;"/>
                    </group>

                    <group>
                        <field name="tabla_libros_blancos" widget="one2many" nolabel="1" context="{'form_view_ref': 'libros_blancos.documentos_librosblancos_form',
                        'default_contrato_id': contrato, 'default_libros_blancos_id': active_id}">
                            <tree decoration-danger="aplica == 'Si' and existe == 'No'" decoration-warning="entregado == True" 
                            decoration-success="entregado == True and existe == 'Si'" default_order="numero_documento asc" editable="bottom">
                                
                                <field name="numero_documento"  />
                                <field name="nombre_documento_m2o" string="Nombre del Documento"/>
                                <field name="nombre_documento" readonly="1" invisible="1" />
                                <field name="etapa"/>
                                <field name="aplica"/>
                                <field name="existe"/>
                                <field name="entregado"/>
                                <field name="fecha_entregado"/>
                                <field name="Observaciones"/>
                                <field name="p_id" invisible="1" />
                                <field name="contrato_id" invisible="1" />
                                <field name="libros_blancos_id" invisible="1"  />
                                <field name="write_date"/>
                            </tree>
                        </field>
                    </group>
                      </page>



                      <page string="Datos Generales">

                      <group  colspan="2" col="1">
                        
                        <div>
                            <b>Nombre de la Obra: </b>
                        </div>
                        
                        <field name="nombre_obra" nolabel="1" readonly="1"/>
                        
                   </group>
                            <hr/>
                        <group colspan="2" col="4" >
                            <b>Programa</b>
                            <b>Ejercicio</b>
                            <b>Tipo de recurso</b>
                            <b>Contratista</b>
                        </group>
                        <group colspan="2" col="4">
                            <field name="programaInversion" readonly="True" string="" nolabel="1"/>
                            <field name="ejercicio" string="" nolabel="1" readonly="1"/>
                            <p>recurso</p>
                            <field name="contratista" string="" nolabel="1" readonly="1"/>
                        </group>
                          <hr/>
                        <group colspan="2" col="4">
                            <b>Municipio</b>
                            <b>Localidad</b>
                            <b>Fecha de anticipo</b>
                            <b>Total de Anticipo</b>
                        </group>

                        <group colspan="2" col="4">
                          <field name="municipio" readonly="1" string="" nolabel="1"/>
                          <field name="localidad" string="" nolabel="1" readonly="1"/>
                          <field name="fecha_anticipos" string="" nolabel="1" readonly="1"/>
                          <field name="total_anticipo" string="" nolabel="1" readonly="1"/>
                        </group>

                        <hr/>
                        <group colspan="2" col="4">
                            <b>Avance Físico</b>
                            <b>Avance Programado</b>
                            <b>Monto/cIva</b>
                            <b>Supervision Externa</b>
                        </group>

                        <group colspan="2" col="4">
                          <field name="a_fis" string="" nolabel="1"/>
                          <field name="porcentajeProgramado" string="" nolabel="1" readonly="1"/>
                          <field name="total" string="" nolabel="1" readonly="1"/>
                            <field name="supervisionexterna1" string="" nolabel="1"/>
                        </group>
                        <hr/>
                        <group colspan="2" col="4">
                            <b>Fecha de contrato</b>
                            <b>Fecha de inicio contractual</b>
                            <b>Fecha de termino contractual</b>
                            <b>Director de obra</b>
                        </group>

                        <group colspan="2" col="4">
                          <field name="fecha" string="" nolabel="1"/>
                          <field name="fechainicio" string="" nolabel="1" readonly="1"/>
                          <field name="fechatermino" string="" nolabel="1"/>
                          <field name="director_obras" string="" nolabel="1" readonly="1"/>
                        </group>
                        <hr/>
                        <group colspan="2" col="4">
                            <b>Estado</b>
                            <b>Fecha Termino Convenida</b>
                            <b>&#160;</b>
                            <b>Tags</b>
                        </group>
                       
                    <group colspan="2" col="4">
                            <b><field name="estado" string="" nolabel="1"/></b>
                            <p>
                                <field name="fecha_termino_convenida" readonly="1" />
                            </p>
                            <p> &#160;</p> 
                            <p><field name="semaforo_tags" widget="many2many_tags" string="Tags" class="oe_inline"
                                     colspan="2" /></p>
                        </group>

                      </page>
                      </notebook>

                    

                </sheet>
            </form>
        </field>
    </record>


    

  


    <!-- VISTA TREE DE PARTIDAS -->
      <record model="ir.ui.view" id="revision_expediente_libros_tree">
      <field name="name">Revision de Documentos al Expediente Único Tree</field>
      <field name="model">libros.blancos</field>
      <field name="arch" type="xml">
        <tree>
            <field name="contrato" string="# Contrato"/> 
            <field name="nombre_obra" string="Descripcion"/>  
            <field name="tipo_obra" string="Tipo"/> 
            <field name="ejercicio" string="Ejercicio"/>  
            <field name="total" string="Monto s/iva"/>  
            <field name="a_fis" string="A. fis"/>  
            <field name="num_faltantes" />
            <field name="fecha_revisado_exp"/>
            <field name="fecha_verificado_exp"/>
            <field name="responsable_revision_exp"/> 

            <field name="reviso_expediente" />
            <field name="verificado_expediente" />
            <field name="porcentaje_existencia" />
            <field name="registrado" />
            <field name="estado_obra_m2o"/>
        </tree>
      </field>
    </record> 

     <!-- VISTA TREE DE DOCUMENTOS LIBROS BLANCOS PARA BORRAR -->
      <record model="ir.ui.view" id="lb_docs_tree">
      <field name="name">lb docs Tree</field>
      <field name="model">expediente.libros_blancos</field>
      <field name="arch" type="xml">
        <tree>
            <field name="numero_documento" />
            <field name="nombre_documento_m2o" string="Nombre del documento"/>
            <field name="contrato_id"/>
            <field name="libros_blancos_id"/>  
            <field name="estado_obra_m2o"/> 
        </tree>
      </field>
    </record>

     <!-- ACCIONES VENTANA ESTIMACIONES -->
    <record model="ir.actions.act_window" id="lb_docs_action">
      <field name="name">DOCS</field>
      <field name="type">ir.actions.act_window</field>
      <field name="res_model">expediente.libros_blancos</field>
      <field name="view_mode">tree,form</field>
      <field name="view_ids" eval="[(5, 0, 0),
        (0, 0, {'view_mode': 'tree', 'view_id': ref('lb_docs_tree')})]"/>
    </record>


      <!-- ACCIONES VENTANA ESTIMACIONES -->
    <record model="ir.actions.act_window" id="revision_expediente_libros_action">
      <field name="name">Revision Fisica Libros Blancos</field>
      <field name="type">ir.actions.act_window</field>
      <field name="res_model">libros.blancos</field>
      <field name="view_mode">tree,form</field>
      <field name="view_ids" eval="[(5, 0, 0),
        (0, 0, {'view_mode': 'tree', 'view_id': ref('revision_expediente_libros_tree')}),
        (0, 0, {'view_mode': 'form', 'view_id': ref('revision_expediente_libros_form')})]"/>
    </record>


  <!--  Formulario de control de expediente  -->
        <record id="documentos_faltantes_form" model="ir.ui.view">
            <field name="name">Docuementos Faltantes form</field>
            <field name="model">expediente.libros_blancos</field>
            <field name="arch" type="xml">
                <form create="false" delete="false">
                    <sheet>
                        <field name="nombre_documento" readonly="1"  invisible="1"/>

                        <group string="Agregar Documento:" col="4">
                                <field name="numero_documento"/>

                                <field name="etapa"/>
                                <field name="aplica"/>
                                <field name="existe"/>
                                <field name="Observaciones"/>
                                <field name="unidadadminsol"/>
                                <field name="contrato_id" />
                        </group>
                    </sheet>
                </form>
            </field>
        </record>


  <!-- DOCUMENTOS FALTANTES -->
  <record model="ir.ui.view" id="libros_documentos_faltantes_tree">
      <field name="name">tree libros</field>
      <field name="model">expediente.libros_blancos</field>
      <field name="arch" type="xml">
        <tree create="false" delete="false">
        <field name="contrato_id" string="Contrato" />
            
           <field name="tipo_obra"/>
            <field name="ejercicio" invisible="1"/>
           <field name="obra"/>
           <field name="contratista"/>
           <field name="residente_obra_2"/>
           <field name="numero_documento" readonly="1"/>
            <field name="nombre_documento_m2o" string="Nombre Documento"/>
             <field name="etapa" readonly="1"/>
            <field name="aplica" invisible="1"/>
            <field name="existe" invisible="1"/>
             <field name="Observaciones" />
            <field name="libros_blancos_id" invisible="1"/> 
             
              <field name="reviso_expediente" invisible="1"/>
              <field name="verificado_expediente" invisible="1"/>
               <field name="fecha_revisado_exp" />
                <field name="fecha_verificado_exp" />
                <field name="unidadadminsol" />  
                <field name="responsable_revision_exp" />
                 <field name="estado_obra_m2o" />
                
        </tree>
      </field>
    </record>

    <record model="ir.ui.view" id="libros_documentos_faltantes_search">
      <field name="name">tree libros search</field>
      <field name="model">expediente.libros_blancos</field>
      <field name="arch" type="xml">
        <search>

          <separator/>
            <filter string=" --- Ejercicio ---" name="ejercicio"/>
          <separator orientation="vertical" />
          <filter string="2021" name="ejercicio" domain="[('ejercicio.name', '=', '2021')]" />
              <filter string="2020" name="ejercicio" domain="[('ejercicio.name', '=', '2020')]" />
              <filter string="2019" name="ejercicio" domain="[('ejercicio.name', '=', '2019')]"/>
              <filter string="2018" name="ejercicio" domain="[('ejercicio.name', '=', '2018')]"/>
              <filter string="2017" name="ejercicio" domain="[('ejercicio.name', '=', '2017')]"/>
              <filter string="2016" name="ejercicio" domain="[('ejercicio.name', '=', '2016')]"/>
              <filter string="2015" name="ejercicio" domain="[('ejercicio.name', '=', '2015')]"/>
          <separator/>
            <filter string=" --- Tipo de Obra ---" name="tipo_obra"/>
          <separator orientation="vertical" />
            <filter string="OBRA" name="tipo_obra" domain="[('tipo_obra.tipo_obra', '=', 'OBRA')]" />
            <filter string="ESTUDIOS" name="tipo_obra" domain="[('tipo_obra.tipo_obra', '=', 'ESTUDIOS')]" />
            <filter string="EQUIPO" name="tipo_obra" domain="[('tipo_obra.tipo_obra', '=', 'EQUIPO')]" />
            <filter string="PROYECTO" name="tipo_obra" domain="[('tipo_obra.tipo_obra', '=', 'PROYECTO')]" />
            <filter string="SUPERVISIÓN EXTERNA" name="tipo_obra" domain="[('tipo_obra.tipo_obra', '=', 'SUPERVISIÓN EXTERNA')]" />
            <filter string="REMODELACIÓN" name="tipo_obra" domain="[('tipo_obra.tipo_obra', '=', 'REMODELACIÓN')]" />
            <filter string="SERVICIOS" name="tipo_obra" domain="[('tipo_obra.tipo_obra', '=', 'SERVICIOS')]" />
            <filter string="VERIFICACIÓN ELÉCTRICA" name="tipo_obra" domain="[('tipo_obra.tipo_obra', '=', 'VERIFICACIÓN ELÉCTRICA')]" />
            <filter string="CONTROL DE CALIDAD" name="tipo_obra" domain="[('tipo_obra.tipo_obra', '=', 'CONTROL DE CALIDAD')]" />
            <filter string="DIRECTOR RESPONSABLE DE OBRA" name="tipo_obra" domain="[('tipo_obra.tipo_obra', '=', 'DIRECTOR RESPONSABLE DE OBRA')]" />
            <filter string="ADQUISICIÓN" name="tipo_obra" domain="[('tipo_obra.tipo_obra', '=', 'ADQUISICIÓN')]" />

          <separator/>
            <filter string=" --- UNIDAD RESPONSABLE ---" name="unidadadminsol"/>
          <separator orientation="vertical" />
            <filter string="DIRECCION GENERAL DE PROYECTOS E INGENIERIA " name="unidadadminsol" domain="[('unidadadminsol.name', '=', 'DIRECCION GENERAL DE PROYECTOS E INGENIERIA')]" />
            <filter string="DIRECCIÓN GENERAL DE EJECUCIÓN DE OBRAS  " name="unidadadminsol" domain="[('unidadadminsol.name', '=', 'DIRECCIÓN GENERAL DE EJECUCIÓN DE OBRAS')]" />
            <filter string="PLANEACIÓN Y CONTROL " name="unidadadminsol" domain="[('unidadadminsol.name', '=', 'PLANEACIÓN Y CONTROL')]" />
            <filter string="LICITACIONES Y CONTRATOS" name="unidadadminsol" domain="[('unidadadminsol.name', '=', 'LICITACIONES Y CONTRATOS')]" />
            
            <filter name="nombre_documento_m2o" string="Documento" context="{'group_by':'nombre_documento_m2o'}"/>
            <filter name="ejercicio" string="Ejercicio" context="{'group_by':'ejercicio'}"/>
            <filter name="tipo_obra" string="Tipo de Obra" context="{'group_by':'tipo_obra'}"/>
            <filter name="unidadadminsol" string="Unidad Solicitante" context="{'group_by':'unidadadminsol'}"/>
            <filter name="estado_obra_m2o" string="Estado Contrato" context="{'group_by':'estado_obra_m2o'}"/>

            <field name="contrato_id" string="Contrato"/>
             <field name="nombre_documento_m2o" string="Documento"/>
             <field name="contratista" string="Contratista"/>
            <field name="numero_documento"/>
            <field name="tipo_obra"/>
            <field name="etapa"/> 
            <field name="aplica"/>
            <field name="existe"/>
            <field name="Observaciones"/>
            <field name="verificado_expediente"/>
            <field name="reviso_expediente"/>
            <field name="libros_blancos_id"/> 
             <field name="estado_obra_m2o"/> 
        </search>
      </field>
    </record>

    <!-- ACCIONES VENTANA ESTIMACIONES -->
    <record model="ir.actions.act_window" id="libros_documentos_faltantes_action">
      <field name="name">Documentos Faltantes</field>
      <field name="type">ir.actions.act_window</field>
      <field name="res_model">expediente.libros_blancos</field>
      <field name="view_mode">tree,form</field>
      <field name="search_view_id" ref="libros_documentos_faltantes_search"/>
      <field name="limit">200</field>
        <field name="view_ids" eval="[(5, 0, 0),
        (0, 0, {'view_mode': 'tree', 'view_id': ref('libros_documentos_faltantes_tree')}),
        (0, 0, {'view_mode': 'form', 'view_id': ref('documentos_faltantes_form')})]"/> 
        <field name="domain">[('aplica','=', 'Si'),('existe','=', 'No')]</field>
    </record>

      <menuitem name="Revision Fisica Libros Blancos" id="revision_expediente_libro_menu"
              parent="revision_expedientes_menu"
              action="revision_expediente_libros_action" sequence="1"/>

      <menuitem name="Documentos Revisados" id="revision_expediente_documentos_menu"
              parent="revision_expedientes_menu"
              action="libros_documentos_menu_action" sequence="4"/>

      <menuitem name="Documentos Faltantes" id="documentos_faltantes_menu"
              parent="revision_expedientes_menu"
              action="libros_documentos_faltantes_action" sequence="6"/>

               <!--menuitem name="Documentos LB" id="lb_docs_menu"
              parent="revision_expedientes_menu"
              action="lb_docs_action" sequence="6"/-->


  </data>
</odoo>